FROM node:latest

WORKDIR /express-backend

COPY package.json .

RUN npm install

ARG STRIPE_SK
ENV STRIPE_SK=$STRIPE_SK
ARG API_PORT
ENV API_PORT=$API_PORT
ARG API_BASE_URL
ENV API_BASE_URL=$API_BASE_URL
ARG MONGO_PORT
ENV MONGO_PORT=$MONGO_PORT
ARG MONGO_DB_URI
ENV MONGO_DB_URI=$MONGO_DB_URI
ARG FRONTEND_PORT
ENV FRONTEND_PORT=$FRONTEND_PORT
ARG FRONTEND_SUCCESS_LINK
ENV FRONTEND_SUCCESS_LINK=$FRONTEND_SUCCESS_LINK
ARG FRONTEND_CANCEL_LINK
ENV FRONTEND_CANCEL_LINK=$FRONTEND_CANCEL_LINK

COPY . . 

EXPOSE 27017

EXPOSE 5000

CMD ["npm", "start"]